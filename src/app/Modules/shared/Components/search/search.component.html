<div class="container mx-auto p-6 flex flex-wrap gap-6">
  <!-- Left Column: People Near You -->
  <div class="flex flex-col w-full lg:w-1/2 mb-6 lg:mb-0 bg-gray-800 rounded-lg p-6 shadow-lg">
    <!-- Search Bar -->
    <div class="mb-6">
      <input type="text" [(ngModel)]="searchQuery" placeholder="Search by name or username..."
        class="w-full sm:w-[90%] md:w-[50%] p-4 border border-gray-300 text-white rounded-lg shadow-md bg-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200" />
    </div>

    <!-- People Near You List -->
    <ng-container *ngIf="peopleNearYouList2!.length > 0; else noPeopleTemplate">
      <h2 class="text-3xl font-semibold text-gray-200 mb-6 text-start">People Near You</h2>

      <div class="flex flex-col items-start space-y-4">
        <div *ngFor="let person of filteredPeople() | slice:0:8; let i = index"
          class="relative w-full flex items-center p-4 border border-gray-700 rounded-xl bg-gray-900 hover:bg-gray-700 transition duration-300"
          (click)="openProfile(person.userId, true)">

          <!-- Background Blur -->
          <div class="absolute inset-0 bg-gray-900 opacity-40 rounded-xl"></div>

          <!-- Profile Picture -->
          <img [src]="person.profilePic || nopicture" alt="{{nopicture }}"
            class="relative w-16 h-16 rounded-full border-2 border-gray-400 z-10" />

          <!-- User Info + Follow Button -->
          <div class="relative flex items-center justify-between w-full ml-4 z-10">
            <!-- User Info -->
            <div class="flex flex-col">
              <p class="font-normal text-md text-gray-300 flex items-center filteredUsername">
                {{ person.username }} </p>
              <!-- <mat-icon *ngIf="perso" class="ml-1 text-blue-500">verified</mat-icon>
              </p> -->
              <p class="text-gray-500 text-sm">{{ person.username }}</p>
            </div>

            <!-- Private Accounts -->
            <!-- <button *ngIf="person.account_type2 === AccountType2.PRIVATE"
              (click)="toggleFollow(person); $event.stopPropagation()" [ngClass]="{
  'bg-blue-500 hover:bg-blue-600': person.follow_status === AccountStatus.Follow,
  'bg-gray-500 hover:bg-gray-600': person.follow_status === AccountStatus.Requested,
  'bg-green-500': person.follow_status === AccountStatus.Following
}" class="text-white px-4 py-2 rounded-md transition shadow-md">
              {{ person.follow_status }}
            </button>-->
            <button
              *ngIf="(!person.account_type2 || person.account_type2 === AccountType2.PUBLIC) && person.userId != this.userID"
              (click)="followPublicAccount(person, i); $event.stopPropagation()" [ngClass]="{
    'text-white bg-blue-500 border border-blue-500': person.follow_status !== AccountStatus.Following,
    'text-gray-300 bg-gray-600 border border-gray-500': person.follow_status === AccountStatus.Following
  }" class="px-4 py-2 rounded-md transition shadow-md follow-button">
              {{ person.follow_status === AccountStatus.Following ? 'Following' : 'Follow' }}
            </button>

          </div>
        </div>
      </div>
    </ng-container>

    <!-- No People Found -->
    <ng-template #noPeopleTemplate>
      <p class="text-gray-500 text-center mt-6">No people found nearby.</p>
    </ng-template>
  </div>

  <!-- Right Column: Continue the Convo -->
  <div class="flex flex-col w-full lg:w-1/3 bg-gray-800 rounded-lg p-6 shadow-lg chat-list">
    <!-- Continue the Convo -->
    <ng-container *ngIf="chattedUserInfo.length > 0; else noConvoTemplate">
      <h2 class="text-3xl font-semibold text-gray-200 mb-6 text-start">Continue the Convo</h2>

      <div class="flex flex-col items-start space-y-4">
        <div *ngFor="let person of chattedUserInfo"
          class="relative w-full flex items-center p-4 border border-gray-700 rounded-xl bg-gray-900 hover:bg-gray-700 transition duration-300">

          <!-- Background Blur -->
          <div class="absolute inset-0 bg-gray-900 opacity-40 rounded-xl"></div>

          <!-- Profile Picture -->
          <img [src]="person.profilePic || nopicture" alt="{{ nopicture }}"
            class="relative w-16 h-16 rounded-full border-2 border-gray-400 z-10" />

          <!-- User Info + Follow Button -->
          <div class="relative flex items-center justify-between w-full ml-4 z-10">
            <!-- User Info -->
            <div class="flex flex-col">
              <p class="font-normal text-md text-gray-300 flex items-center">
                {{ person.username }}
                <!-- <mat-icon *ngIf="person.is_verified" class="ml-1 text-blue-500">verified</mat-icon> -->
              </p>
              <p class="text-gray-500 text-sm">{{ person.username }}</p>
            </div>

            <!-- Private Accounts -->

            <!-- Public Accounts (Click to Follow) -->
            <button class=" flex justify-center items-center rounded-md"
              (click)="openChatOfPerson(person.userId, person.username)">
              <mat-icon class="text-white chatBubble">chat_bubble</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </ng-container>

    <!-- No Convo Found -->
    <ng-template #noConvoTemplate>
      <p class="text-gray-500 text-center mt-6 noChatMessage">No people found to continue the conversation with.</p>
    </ng-template>
  </div>
</div>